'use strict';(function(){for(var U=function(c){var a;return null===(a=c._do_not_use_8bd880e91bee1ad82e08.rootNode)||void 0===a?void 0:a.querySelector(".dailymotion-player-wrapper")},V=function(c){var a;return null===(a=c._do_not_use_8bd880e91bee1ad82e08.rootNode)||void 0===a?void 0:a.querySelector(".dailymotion-player")},C=[],W=function(c){C=[].concat(_dmpesplayer._(C),[c]);return function(){C=C.filter(function(a){return a!==c})}},ea=function(){C.forEach(function(c){return c()});C=[]},H=[],X=function(c,
a,d,f){var b=c.on(a,d,f);H=[].concat(_dmpesplayer._(H),[b]);c=function(){b();H=H.filter(function(g){return g!==b})};W(c);return c},l={state:{},prevState:{},defaultState:{isRunning:!1,displayMode:null,isSmallViewportDisplay:!1,isExpanded:!1,hasRequestedVideoNavigation:!1,hasRequestedPipNative:!1,uiActionOrigin:null,playerSelectedForPip:null,playerSelectedForPipNative:null},nonPersistentStateProps:["uiActionOrigin"],onStateChange:function(){},setState:function(c){var a=this;this.nonPersistentStateProps.forEach(function(d){Object.prototype.hasOwnProperty.call(c,
d)||(c=_dmpesplayer.c({},c,{},_dmpesplayer.d({},d,a.defaultState[d])))});this.prevState=_dmpesplayer.c({},this.prevState,{},this.state);this.state=_dmpesplayer.c({},this.state,{},c);this.onStateChange(this.prevState,this.state)}},t=function(c){l.setState(c)},I=16/9,J=null,Y=!1,D=!1,A=null,O=Object.values(window.dailymotion._do_not_use_8bd880e91bee1ad82e08.players),K=0;K<O.length;K++)if(O[K]._do_not_use_8bd880e91bee1ad82e08.settings.pip!==_dmpesplayer.e.OFF){Y=O[K]._do_not_use_8bd880e91bee1ad82e08.settings.enableStartPipExpanded;
break}var u=function(){return window.innerWidth<=_dmpesplayer.V.SMALL_BREAKPOINT?_dmpesplayer.f.FOR_SMALL_VIEWPORT:_dmpesplayer.f.FOR_LARGE_VIEWPORT},E=function(){return u()===_dmpesplayer.f.FOR_SMALL_VIEWPORT},Z=function(c){return E()?L()||D||(null===c||void 0===c?0:c.adIsPlaying)?!0:!1:!1},ha=function(c,a){var d=function(b){b&&t({isExpanded:Z(),displayMode:u(),isSmallViewportDisplay:E()});F(c)};fa(c,a);d();var f=_dmpesplayer.g(window,"resize",d);W(function(){f();aa(c);A&&(A(),A=null)})},M=function(c,
a,d){l.state.isRunning&&!D&&(J=a?!0:!1,F(c,{animate:!0}),t({isExpanded:J,uiActionOrigin:d}))},F=function d(a){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=f.animate;b=void 0===b?!1:b;f=f.computePlayerIframeSizes;aa(a,{animate:b,computePlayerIframeSizes:void 0===f?!0:f});var g=a._do_not_use_8bd880e91bee1ad82e08.rootNode,n=U(a);f=V(a);var h=L()||D,e=ia(),r=e.dynamicWidth,m=e.dynamicHeight,k=document.documentElement.clientWidth,p=Math.round(k/I);n.id="dailymotion-pip-".concat(u(),
"-viewport");if(ja(n)){var q=function(x){return getComputedStyle(document.querySelector("#".concat(n.id))).getPropertyValue(x)},B={large:{defaultPositionX:"right",defaultPositionY:"bottom",defaultMargin:"".concat(20,"px")},small:{defaultPositionX:"left",defaultPositionY:"top",defaultMargin:"0px"}}[u()];e=B.defaultPositionX;var P=B.defaultPositionY;B=B.defaultMargin;var v=function(x){return""!==q("--position-".concat(x)).trim()};v("top")||v("bottom")||n.style.setProperty("--position-".concat(P),B);
v("left")||v("right")||n.style.setProperty("--position-".concat(e),B);!v("bottom")&&A&&(A(),A=null);v("bottom")&&E()&&!A&&(A=_dmpesplayer.g(window,"scroll",function(){d(a,{computePlayerIframeSizes:!1})}));var y=getComputedStyle(n),w=v("left")?"left":"right",G=v("top")?"top":"bottom";Object.assign(n.style,{boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",height:"".concat("large"===u()?m:h?p:104,"px"),position:"fixed",transform:function(){for(var x=[],z=n.parentNode;z!==document&&z;)x.push(z),z=z.parentNode;
z=document.documentElement.scrollLeft?document.documentElement.scrollLeft:x.reduce(function(Q,R){return Q+R.scrollLeft},0);var S=document.documentElement.scrollTop?document.documentElement.scrollTop:x.reduce(function(Q,R){return Q+R.scrollTop},0);x=("right"===w?document.documentElement.clientWidth-("large"===u()?r:k):0)-g.getBoundingClientRect().x-z;z=("bottom"===G?window.innerHeight-("large"===u()?m:h?p:104):0)-g.getBoundingClientRect().y-S;S="right"===w?"-":"+";var ka="bottom"===G?"-":"+";return"translate(\n        calc(".concat(x,
"px ").concat(S," ").concat("0.00001"!==parseFloat(y.marginRight).toPrecision(1)?"".concat(parseFloat(y.marginRight),"px"):"left"!==w||isNaN(q("--position-left").trim())?"right"!==w||isNaN(q("--position-right").trim())?"var(--position-".concat(w,")"):"".concat(Number(q("--position-right")),"px"):"".concat(Number(q("--position-left")),"px"),"),\n        calc(").concat(z,"px ").concat(ka," ").concat("0.00001"!==parseFloat(y.marginBottom).toPrecision(1)?"".concat(parseFloat(y.marginBottom),"px"):"top"!==
G||isNaN(q("--position-top").trim())?"bottom"!==G||isNaN(q("--position-bottom").trim())?"var(--position-".concat(G,")"):"".concat(Number(q("--position-bottom")),"px"):"".concat(Number(q("--position-top")),"px"),")\n      )")}(),transition:b?"height 0.3s ease":"none",width:"".concat("large"===u()?r:k,"px"),zIndex:_dmpesplayer.M,bottom:"unset",left:"unset",right:"unset",top:"unset"});n.offsetWidth}else e={"for-large-viewport":{width:"".concat(r,"px"),height:"".concat(m,"px"),margin:"".concat(20,"px"),
bottom:"0px",left:"initial",right:"0px",top:"initial"},"for-small-viewport":{width:"".concat(k,"px"),height:"".concat(h?p:104,"px"),margin:"0px",bottom:"initial",left:"0px",right:"initial",top:"0px"}}["for-".concat(u(),"-viewport")],Object.assign(n.style,{bottom:e.bottom,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",height:e.height,left:e.left,margin:e.margin,position:"fixed",right:e.right,top:e.top,transition:b?"height 0.3s ease":"none",width:e.width,zIndex:_dmpesplayer.M});E()?(Object.assign(f,{height:"".concat(p,
"px"),width:"".concat(k,"px")}),Object.assign(f.style,{height:"".concat(p,"px"),transition:b?"transform 0.3s ease":"none",transform:h?"translate(0px,0px)":"translate(0px, -".concat(Math.round((p-104)/2),"px)"),width:"".concat(k,"px")})):(Object.assign(f,{height:"100%",width:"100%"}),Object.assign(f.style,{height:"100%",transition:"none",transform:"translate(0px,0px)",width:"100%"}))},L=function(){return J||null===J&&Y?!0:!1},aa=function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},f=d.animate;f=void 0===f?!1:f;d=d.computePlayerIframeSizes;d=void 0===d?!0:d;var b=U(a),g=V(a);b.removeAttribute("id");b.style.removeProperty("--position-top");b.style.removeProperty("--position-left");b.style.removeProperty("--position-bottom");b.style.removeProperty("--position-right");Object.assign(b.style,_dmpesplayer.c({boxShadow:"unset"},f?{}:{height:"100%"},{position:"absolute",transform:"translate(0px,0px)",width:"100%",zIndex:"auto",margin:"0.00001px",bottom:"0.00001px",left:"0.00001px",
right:"0.00001px",top:"0.00001px"}));d&&(Object.assign(g,{height:"100%",width:"100%"}),Object.assign(g.style,{height:"100%",transform:"translate(0px,0px)",transition:"none",width:"100%"}))},ia=function(){var a=window.innerWidth;if(a<=_dmpesplayer.V.MEDIUM_BREAKPOINT)return{dynamicWidth:410,dynamicHeight:Math.round(410/I)};if(a>=_dmpesplayer.V.LARGE_BREAKPOINT)return{dynamicWidth:560,dynamicHeight:Math.round(560/I)};var d=_dmpesplayer.V.LARGE_BREAKPOINT-_dmpesplayer.V.MEDIUM_BREAKPOINT;a=Math.round((a-
_dmpesplayer.V.LARGE_BREAKPOINT+d)/d*150)+410;return{dynamicWidth:a,dynamicHeight:Math.round(a/I)}},fa=function(a,d){(D=d.adIsPlaying)?ba(a):ca(a)},ca=function(a){X(a,_dmpesplayer.E.PUBLIC.AD_START,function(){D=!0;L()||(F(a),t({isExpanded:E()}));ba(a)},{once:!0})},ba=function(a){X(a,_dmpesplayer.E.PUBLIC.AD_END,function(){D=!1;L()||(F(a),t({isExpanded:!1}));ca(a)},{once:!0})},ja=function(a){if(!_dmpesplayer.i("PV5_PES_PIP_CLS"))return!1;a=getComputedStyle(a);return"0.00001"===parseFloat(a.bottom).toPrecision(1)&&
"0.00001"===parseFloat(a.left).toPrecision(1)&&"0.00001"===parseFloat(a.right).toPrecision(1)&&"0.00001"===parseFloat(a.top).toPrecision(1)},T=function(){},N=function(){},la=function(){t(_dmpesplayer.c({},l.defaultState));T=function(h){a();d();f();b();g();n();N(h)};var a=_dmpesplayer.j(_dmpesplayer.E.PUBLIC.PLAYER_VIEWABILITYCHANGE,function(h){var e=h.viewable,r=h.wasViewableAtLeastOnce,m=h.uiActionOrigin,k=window.dailymotion._do_not_use_8bd880e91bee1ad82e08.players[h.id];if(k&&k._do_not_use_8bd880e91bee1ad82e08.settings.pip!==
_dmpesplayer.e.OFF&&!(l.state.playerSelectedForPip&&k!==l.state.playerSelectedForPip||l.state.playerSelectedForPipNative)){var p=k.isEligibleForPipDisplay(r);h=p.status;p=p.reason;_dmpesplayer.l.log("PiP","Viewability change received\n        - is player viewable : ".concat(e,"\n        - is player eligible for PIP display : ").concat(h," (").concat(p,")"));e?N(m||"scroll"):!e&&k.isEligibleForPipDisplay(r).status&&k.getState().then(function(q){da(k,q,r||k._do_not_use_8bd880e91bee1ad82e08.settings.pip!==
_dmpesplayer.e.INSTANT?"scroll":"instant_start")})}}),d=_dmpesplayer.j(_dmpesplayer.E.PUBLIC.PLAYER_PRESENTATION_MODE_CHANGE,function(h){var e=h.playerPresentationMode,r=_dmpesplayer.P.NATIVE_PIP,m=window.dailymotion._do_not_use_8bd880e91bee1ad82e08.players[h.id];m&&(e===_dmpesplayer.P.INLINE&&l.state.playerSelectedForPipNative===m&&t({playerSelectedForPipNative:null}),e===r?(t({playerSelectedForPipNative:m}),l.state.hasRequestedPipNative&&t({hasRequestedPipNative:!1}),l.state.playerSelectedForPip&&
N("pip_native_icon")):m.getState().then(function(k){k.playerIsViewable||da(m,k,"pip_native_icon")}))}),f=_dmpesplayer.j(_dmpesplayer.E.PRIVATE.CLOSE_PIP_REQUESTED,function(){T("close_icon")}),b=_dmpesplayer.j(_dmpesplayer.E.PRIVATE.BACK_TO_INLINE_DISPLAY_REQUESTED,function(){var h=l.state.playerSelectedForPip;h._do_not_use_8bd880e91bee1ad82e08.observer.setUIActionOrigin("back_icon");h._do_not_use_8bd880e91bee1ad82e08.rootNode.scrollIntoView({block:"start"})}),g=_dmpesplayer.j(_dmpesplayer.E.PRIVATE.COLLAPSE_PIP_REQUESTED,
function(){M(l.state.playerSelectedForPip,!1,"toggle_icon")}),n=_dmpesplayer.j(_dmpesplayer.E.PRIVATE.EXPAND_PIP_REQUESTED,function(){M(l.state.playerSelectedForPip,!0,"toggle_icon")})},da=function(a,d,f){l.state.isRunning||window.dailymotion._do_not_use_8bd880e91bee1ad82e08.playerSelectedForPip!==a||l.state.playerSelectedForPipNative||(N=function(b){l.state.isRunning&&(ea(),t({isRunning:!1,playerSelectedForPip:null,uiActionOrigin:b}),l.onStateChange=function(){},"close_icon"!==b&&"api_call"!==b||
a.pause())},l.onStateChange=function(b,g){var n=b.isRunning,h=b.isExpanded,e=g.isRunning,r=g.isExpanded,m=g.uiActionOrigin,k=g.playerSelectedForPipNative,p=_dmpesplayer.h.ENABLED,q=_dmpesplayer.h.CLOSED,B=_dmpesplayer.P.PIP,P=_dmpesplayer.P.INLINE,v=_dmpesplayer.P.NATIVE_PIP,y=_dmpesplayer.E.PUBLIC,w=y.PLAYER_PRESENTATIONMODECHANGE;y=y.PLAYER_PIPEXPANDEDCHANGE;m={playerPipDisplay:"".concat(g.displayMode,"Viewport"),playerPipIsExpanded:r,playerPipStatus:"close_icon"===m?q:p,playerPresentationMode:e?
B:k?v:P};Object.assign(a._do_not_use_8bd880e91bee1ad82e08.stateFromPES,m);n!==e&&_dmpesplayer.b(w,_dmpesplayer.c({id:a._do_not_use_8bd880e91bee1ad82e08.id},m));h!==r&&_dmpesplayer.b(y,_dmpesplayer.c({id:a._do_not_use_8bd880e91bee1ad82e08.id},m));n=b.isSmallViewportDisplay;h=b.isExpanded;e=b.hasRequestedVideoNavigation;r=b.hasRequestedPipNative;w=g.isRunning;m=g.isSmallViewportDisplay;k=g.isExpanded;p=g.hasRequestedVideoNavigation;q=g.hasRequestedPipNative;g=g.uiActionOrigin;if(b.isRunning!==w||n!==
m||h!==k||e!==p||r!==q)b={isRunning:w,isSmallViewportDisplay:m,isExpanded:k,hasRequestedVideoNavigation:p,hasRequestedPipNative:q,uiActionOrigin:g,screenId:window.dailymotion._do_not_use_8bd880e91bee1ad82e08.screenId},_dmpesplayer.l.log("PipEmitter","Sending new PIP state to player :",b),_dmpesplayer.s(a,_dmpesplayer.C.NOTIFY_PIP_CHANGED,b)},t({isRunning:!0,uiActionOrigin:f,displayMode:u(),isSmallViewportDisplay:E(),isExpanded:Z(d),playerSelectedForPip:a}),ha(a,d))};window.dailymotion.pipResume=function(){la()};
window.dailymotion.pipClose=function(){T("api_call")};window.dailymotion.pipExpand=function(){M(l.state.playerSelectedForPip,!0,"api_call")};window.dailymotion.pipCollapse=function(){M(l.state.playerSelectedForPip,!1,"api_call")};window.dailymotion.pipRepaint=function(){F(l.state.playerSelectedForPip)}})()
